import { Router } from "express";
import { rdstationWebhook } from "./controllers/rdstation.controller";
import { ploomesWebhook } from "./controllers/ploomes.controller"; // ðŸ‘ˆ novo import

console.log("âœ… Routes carregado com sucesso");

const router = Router();

// ==========================
// Webhooks
// ==========================

// RD Station â†’ IntegraÃ§Ã£o â†’ Ploomes
router.post("/webhook/rdstation", rdstationWebhook);

// Ploomes â†’ IntegraÃ§Ã£o â†’ RD Station
router.post("/webhook/ploomes", ploomesWebhook); // ðŸ‘ˆ nova rota

// ==========================
// Healthcheck
// ==========================
router.get("/healthz", (_req, res) => res.json({ status: "ok" }));

// ==========================
// Test route
// ==========================
router.get("/test", (_req, res) => {
  res.json({ ok: true });
});

export default router;

